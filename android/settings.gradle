// ------------------------------------------------------------
// ✅ SETTINGS.GRADLE — VERIFIED FOR CAPACITOR + GRADLE 8+
// ------------------------------------------------------------

pluginManagement {
    repositories {
        google()
        mavenCentral()
        gradlePluginPortal()
    }
}

dependencyResolutionManagement {
    repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)
    repositories {
        google()
        mavenCentral()
    }
}

// ✅ settings.gradle
rootProject.name = "Emergency Response PH"
include ':app'
apply from: "../node_modules/@capacitor/cli/assets/capacitor-settings.gradle"


// ✅ Include main app module
include ':app'

// ✅ Auto-include Capacitor core modules
include ':capacitor-android'
project(':capacitor-android').projectDir = new File('../node_modules/@capacitor/android/capacitor')

// ✅ Auto-include Cordova Android bridge
include ':capacitor-cordova-android-plugins'
project(':capacitor-cordova-android-plugins').projectDir = new File('../node_modules/@capacitor/cli/assets/capacitor-cordova-android-plugins')

// ✅ Optional: dynamically detect installed Capacitor plugins
def capacitorPlugins = new File('../node_modules').listFiles()?.findAll { it.name.startsWith('@capacitor') || it.name.startsWith('capacitor-') }

capacitorPlugins?.each { plugin ->
    def androidFolder = new File(plugin, 'android')
    if (androidFolder.exists()) {
        include ":${plugin.name}"
        project(":${plugin.name}").projectDir = androidFolder
        println "✅ Included Capacitor plugin: ${plugin.name}"
    }
}
